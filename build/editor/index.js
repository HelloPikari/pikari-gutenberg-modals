(()=>{"use strict";var t,e={871:()=>{const t=window.wp.richText,e=window.wp.i18n,o=window.wp.components,a=window.wp.blockEditor,r=window.wp.element,n=window.wp.data,i=window.wp.primitives,l=window.ReactJSXRuntime,s=(0,l.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(i.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})}),d="modal-toolbar-button/modal-link";(0,t.registerFormatType)("modal-toolbar-button/modal-link",{title:(0,e.__)("Modal Link","pikari-gutenberg-modals"),tagName:"span",className:"modal-link-trigger",attributes:{"data-modal-link":"data-modal-link","data-modal-content-type":"data-modal-content-type","data-modal-content-id":"data-modal-content-id"},edit:({isActive:i,value:c,onChange:p,contentRef:u})=>{const[m,h]=(0,r.useState)(!1),[v,g]=(0,r.useState)(null),w=(0,r.useRef)(),b=(0,n.useSelect)(t=>t("core/block-editor").getSelectedBlock(),[]),k=window.pikariGutenbergModals?.supportedBlocks||["core/paragraph","core/heading","core/list","core/list-item","core/quote","core/verse","core/preformatted","core/navigation-link"],f=b&&k.includes(b.name);if((0,r.useEffect)(()=>{if(!i||!c.activeFormats)return;const t=c.activeFormats.find(t=>t.type===d);if(t?.attributes)try{const e=JSON.parse(t.attributes["data-modal-link"]||"{}");g(e)}catch(e){console.warn("Failed to parse modal link data:",e),g({url:t.attributes["data-modal-content-id"]||"",type:t.attributes["data-modal-content-type"]||"post"})}},[i,c.activeFormats]),!f)return null;const y=()=>{h(!1)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.RichTextToolbarButton,{ref:w,icon:s,title:(0,e.__)("Modal Link","pikari-gutenberg-modals"),onClick:()=>{h(!0)},isActive:i,className:"modal-toolbar-button",shortcutType:"primary",shortcutCharacter:"m"}),m&&(0,l.jsx)(o.Popover,{onClose:y,position:"bottom center",className:"modal-link-popover",anchorRef:u,focusOnMount:"firstElement",children:(0,l.jsx)(a.LinkControl,{searchInputPlaceholder:(0,e.__)("Search or enter URL","pikari-gutenberg-modals"),value:v,onChange:e=>{if(!e||!e.url)return p((0,t.removeFormat)(c,d)),void y();let o="url",a=e.url;e.id&&(o=e.type||"post",a=e.id);const r={...e,title:e.title||e.url},n={type:d,attributes:{"data-modal-link":JSON.stringify(r),"data-modal-content-type":o,"data-modal-content-id":String(a),href:"#"}};p((0,t.applyFormat)(c,n)),y()},onRemove:()=>{p((0,t.removeFormat)(c,d)),y()},showInitialSuggestions:!0,showSuggestions:!0,settings:[]})})]})}})}},o={};function a(t){var r=o[t];if(void 0!==r)return r.exports;var n=o[t]={exports:{}};return e[t](n,n.exports,a),n.exports}a.m=e,t=[],a.O=(e,o,r,n)=>{if(!o){var i=1/0;for(c=0;c<t.length;c++){for(var[o,r,n]=t[c],l=!0,s=0;s<o.length;s++)(!1&n||i>=n)&&Object.keys(a.O).every(t=>a.O[t](o[s]))?o.splice(s--,1):(l=!1,n<i&&(i=n));if(l){t.splice(c--,1);var d=r();void 0!==d&&(e=d)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[o,r,n]},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={737:0,805:0};a.O.j=e=>0===t[e];var e=(e,o)=>{var r,n,[i,l,s]=o,d=0;if(i.some(e=>0!==t[e])){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(s)var c=s(a)}for(e&&e(o);d<i.length;d++)n=i[d],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(c)},o=globalThis.webpackChunkpikari_gutenberg_modals=globalThis.webpackChunkpikari_gutenberg_modals||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})();var r=a.O(void 0,[805],()=>a(871));r=a.O(r)})();